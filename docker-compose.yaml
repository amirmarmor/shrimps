version: "3.9"
services:
    redis:
      container_name: redis
      build: ./redis/.
      ports:
        - "6379:6379"
      volumes:
        - ../data/redis:/data
      restart: always
    backend:
      environment:
        - HOST=redis
      devices:
        - /dev/video0:/dev/video0
      container_name: backend
      build:
        context: ./backend
      depends_on:
        - redis
      volumes:
        - /videos:/app/videos
